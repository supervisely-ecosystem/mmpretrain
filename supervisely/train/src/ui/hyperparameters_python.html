<sly-card title="Preview full training configuration (autogenerated)"
          subtitle="Training settings in MMClassification are the set of python configs. App generates these configs
                    automatically. Generated configs will be saved to Team Files along with other training artifacts.
                    Learn more in app readme."
          :options="{collapsable: true}"
          :collapsed.sync="state.collapsed8"
          :disabled="{disabled: state.disabled8, message: 'Finish previous steps before preview final configuration'}"
          ref="step8">
    <el-button type="primary" class="regular"
               @click="command('preview_configs')"
               v-if="state.modelPyConfig.length === 0">
        Generate final configs
    </el-button>
    <sly-field v-if="state.modelPyConfig.length > 0"
               title="Advanced usage (not recommended for most of the users)"
               description="Experienced MMClassification users can edit python configs. In this case app will
               not validate them (do it at your own risk - training can crash if configs are incorrect)">
        <sly-icon slot="icon" :options="{ color: '#fba607', bgColor: '#ffe9da', rounded: false }">
            <i class="zmdi zmdi-lamp"></i>
        </sly-icon>
<!--        <div>{{state.pyConfigsViewOptions}}</div>-->
        <div class="fflex">
            <el-switch
                    class="mr10"
                    v-model="state.advancedPy"
                    :disabled="data.done8"
                    on-color="#13ce66"
                    off-color="#B8B8B8"
                    @input="x => {
                                state.advancedPy = x;
                                if (x === true) {
                                    state.pyConfigsViewOptions = data.configsPyViewOptionsWrite;
                                }
                                else {
                                    state.pyConfigsViewOptions = data.configsPyViewOptionsRead;
                                }
                                command('preview_configs');
                            }"
            >
            </el-switch>
            <div>I am PRO in MMClassification and want to edit generated python configs manually</div>
        </div>
    </sly-field>

    <sly-field title="Model config (model_config.py)" v-if="state.modelPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>model_config.py
        </div>
        <sly-copy-to-clipboard :data="state.modelPyConfig">
            <sly-editor v-model="state.modelPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Dataset config (dataset_config.py)" v-if="state.datasetPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>dataset_config.py
        </div>
        <sly-copy-to-clipboard :data="state.datasetPyConfig">
            <sly-editor v-model="state.datasetPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Optimizer and schedule config (schedule_config.py)" v-if="state.schedulePyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>schedule_config.py
        </div>
        <sly-copy-to-clipboard :data="state.schedulePyConfig">
            <sly-editor v-model="state.schedulePyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Runtime config (runtime_config.py)" v-if="state.runtimePyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>runtime_config.py
        </div>
        <sly-copy-to-clipboard :data="state.runtimePyConfig">
            <sly-editor v-model="state.runtimePyConfig" :options="state.pyConfigsViewOptions"></sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Train config (train_config.py)" v-if="state.mainPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>train_config.py
        </div>
        <sly-copy-to-clipboard :data="state.mainPyConfig">
            <sly-editor v-model="state.mainPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <el-button type="primary" class="regular"
               @click="command('accept_py_configs')"
               v-if="!data.done8 && state.modelPyConfig.length > 0">
        Finish step
    </el-button>
    <div v-if="data.done8">
        <i class="zmdi zmdi-check-circle mr5 mt10" style="color: #13ce66"></i>
        <span style="color: #5a6772;">Python configs has been successfully generated</span>
    </div>
    <el-button type="warning" class="regular mt10" :plain="true"
               @click="state.restartFrom = 8;"
               v-if="data.done8 && !state.started">
        <i class="zmdi zmdi-rotate-left mr5"></i> Change configs
    </el-button>

</sly-card>